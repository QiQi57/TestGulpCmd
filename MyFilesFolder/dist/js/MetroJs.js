!function(){jQuery.fn.metrojs={},jQuery.fn.metrojs.preloadImages=function(e){var t=jQuery(this).toArray(),a=jQuery("<img style='display:none;'>").appendTo("body");jQuery(this).each(function(){a.attr({src:this}).load(function(){for(var a=(jQuery(this).attr("src"),0);a<t.length;a++)t[a]==element&&t.splice(a,1);0==t.length&&e()})}),a.remove()},jQuery.fn.liveTile=function(e){if(t[e]){for(var a=[],i=1;i<=arguments.length;i++)a[i-1]=arguments[i];return t[e].apply(this,a)}return"object"!=typeof e&&e?void jQuery.error("Method "+e+" does not exist on jQuery.liveTile"):t.init.apply(this,arguments)},jQuery.fn.liveTile.State={RUNNING:"running",STOPPED:"stopped"},jQuery.fn.liveTile.defaults={mode:"slide",speed:500,initDelay:-1,delay:5e3,stops:"100%",stack:!1,direction:"vertical",tileCssSelector:">div,>li",listTileCssSelector:">div,>p,>img,>a",imageCssSelector:">img,>a>img",ignoreDataAttributes:!1,pauseOnHover:!1,repeatCount:-1,animationComplete:function(e,t,a){},preloadImages:!1,fadeSlideSwap:!1,appendBack:!0,triggerDelay:function(e){return 3e3*Math.random()},alwaysTrigger:!1,frontImages:null,frontIsRandom:!0,frontIsBackgroundImage:!1,frontIsInGrid:!1,backImages:null,backIsRandom:!0,backIsBackgroundImage:!1,backIsInInGrid:!1,flipListOnHover:!1,useModernizr:"undefined"!=typeof window.Modernizr,useHardwareAccel:!0,$front:null,$back:null};var e={shuffleArray:function(e){for(var t=[];e.length;)t.push(e.splice(Math.random()*e.length,1));for(;t.length;)e.push(t.pop());return e},setTimer:function(e,t){return setInterval(e,t)},stopTimer:function(e){return clearInterval(e),null},appendStyleProperties:function(e,t,a){for(var i="Webkit Moz O ms Khtml ".split(" "),n=0;n<=t.length-1;n++)for(var r=0;r<=i.length-1;r++)e[$.trim(i[r]+t[n])]=a[n];return e},setExtraProperties:function(e,t){"undefined"!=typeof t.alt&&e.attr("alt",t.alt);var a=e.parent();"undefined"!=typeof t.href&&"A"==a[0].tagName?(a.attr("href",t.href),"undefined"!=typeof t.target&&a.attr("target",t.target),"undefined"!=typeof t.onclick&&(a.attr("onclick",t.onclick),e.attr("onclick",""))):"undefined"!=typeof t.onclick&&e.attr("onclick",t.onclick)},handleListItemSwap:function(t,a,i,n){var r=t.find(n.imageCssSelector);i?r.css({backgroundImage:"url('"+a.src+"')"}):r.attr("src",a.src),e.setExtraProperties(r,a)},handleSlide:function(t,a,i,n,r){if(!t&&i){var o,s=a.find(n.imageCssSelector);o=n.frontImages[r],1==n.fadeSlideSwap?s.fadeOut(function(){s.attr("src",o.src),e.setExtraProperties(s,o),s.fadeIn()}):(s.attr("src",o.src),e.setExtraProperties(s,o))}},handleSwap:function(t,a,i,n){var r=e.getImage(a,i,n),o=t.find(i.imageCssSelector);o.attr("src",r.src),e.setExtraProperties(o,r)},getImage:function(e,t,a){var i=e?t.frontImages:t.backImages,n=i[Math.min(a,i.length-1)];return n}},t={init:function(t){var a={};jQuery.extend(a,jQuery.fn.liveTile.defaults,t);var i="object"==typeof a.frontImages&&a.frontImages instanceof Array&&a.frontImages.length>0,n="object"==typeof a.backImages&&a.backImages instanceof Array&&a.backImages.length>0,r=!1,o=!1,s=!1,l=!1,d=a.useHardwareAccel;if(1==a.useHardwareAccel)if(0==a.useModernizr)if("undefined"!=typeof window.MetroModernizr)r=window.MetroModernizr.canTransform,o=window.MetroModernizr.canTransition,s=window.MetroModernizr.canTransform3d,l=window.MetroModernizr.canAnimate;else{window.MetroModernizr={};var c="metromodernizr",f=document.documentElement,u=document.head||document.getElementsByTagName("head")[0],p=document.createElement(c),m=p.style,h=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),g="Webkit Moz O ms Khtml".split(" "),y=function(e,t){for(var a in e)if(void 0!==m[e[a]]&&(!t||t(e[a],p)))return!0},v=function(e,t){var a=e.charAt(0).toUpperCase()+e.substr(1),i=(e+" "+g.join(a+" ")+a).split(" ");return!!y(i,t)},T=function(){var e=!!y(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);return e&&"webkitPerspective"in f.style&&(e=j("@media ("+h.join("transform-3d),(")+"metromodernizr)")),e},j=function(e){var t,a=document.createElement("style"),i=document.createElement("div");return a.textContent=e+"{#metromodernizr{height:3px}}",u.appendChild(a),i.id="metromodernizr",f.appendChild(i),t=3===i.offsetHeight,a.parentNode.removeChild(a),i.parentNode.removeChild(i),!!t};r=!!y(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),o=v("transitionProperty"),s=T(),l=v("animationName"),window.MetroModernizr.canTransform=r,window.MetroModernizr.canTransition=o,window.MetroModernizr.canTransform3d=s,window.MetroModernizr.canAnimate=l,f=null,u=null,p=null,m=null}else r=jQuery("html").hasClass("csstransforms"),o=jQuery("html").hasClass("csstransitions"),s=jQuery("html").hasClass("csstransforms3d"),l=jQuery("html").hasClass("cssanimations");return d=d&&l&&r&&s,a.preloadImages&&(i&&jQuery(a.frontImages).metrojs.preloadImages(function(){}),n&&jQuery(a.backImages).metrojs.preloadImages(function(){})),jQuery(this).each(function(t){var r=jQuery(this);r.slideTimer=null,r.actionTimer=null;var s={};s.state=null==r.slideTimer?jQuery.fn.liveTile.State.STOPPED:jQuery.fn.liveTile.State.RUNNING,s.speed=a.ignoreDataAttributes||"undefined"==typeof r.data("speed")?a.speed:r.data("speed"),s.delay=a.ignoreDataAttributes||"undefined"==typeof r.data("delay")?a.delay:r.data("delay"),s.delay<-1?s.delay=a.triggerDelay(t):s.delay<0&&(s.delay=3500+4501*Math.random()),s.stops=a.ignoreDataAttributes||"undefined"==typeof r.data("stops")?a.stops:r.data("stops"),s.stack=a.ignoreDataAttributes||"undefined"==typeof r.data("stack")?a.stack:r.data("stack"),s.mode=a.ignoreDataAttributes||"undefined"==typeof r.data("mode")?a.mode:r.data("mode"),s.direction=a.ignoreDataAttributes||"undefined"==typeof r.data("direction")?a.direction:r.data("direction"),s.useHwAccel=a.ignoreDataAttributes||"undefined"==typeof r.data("ha")?a.useHardwareAccel:r.data("ha"),s.initDelay=a.ignoreDataAttributes||"undefined"==typeof r.data("initdelay")?a.initDelay<0?s.delay:a.initDelay:r.data("initdelay"),s.repeatCount=a.ignoreDataAttributes||"undefined"==typeof r.data("repeat")?a.repeatCount:r.data("repeat"),s.hasRun=!1,s.isReversed=!1,s.loopCount=0,s.slideIndex=0,s.stops="object"==typeof a.stops&&a.stops instanceof Array?a.stops:(""+s.stops).split(","),r.addClass(s.mode);var l=r.find(a.tileCssSelector),c=null;c=null!=a.$front&&a.$front.length>0?"flip-list"==s.mode?null:"slide"==s.mode?a.$front.addClass("slide-front"):a.$front.addClass("flip-front"):"flip-list"==s.mode?null:"slide"==s.mode?l.first().addClass("slide-front"):l.first().addClass("flip-front");var f="slide"==s.mode?"slide-back":"flip-back",u=null;u=null!=a.$back&&a.$back.length>0?"flip-list"==s.mode?null:a.$back.addClass(f):"flip-list"==s.mode?null:l.length>1?l.last().addClass(f):1==a.appendBack?jQuery('<div class="'+f+'"></div>').appendTo(r):jQuery("<div></div>");var p=r.height(),m=r.width(),h="vertical"==s.direction?p/2:m/2,g=0,y=0,v=0,T=!1,j=[],C=[],w=-1,b=[],I=-1;if(a.pauseOnHover&&r.find(a.tileCssSelector).bind("mouseover.liveTile",function(){s.stopTimer(!1)}).bind("mouseout.liveTile",function(){s.setTimer()}),"flip-list"==s.mode)r.find(a.tileCssSelector).each(function(){var e=jQuery(this),t=null!=a.$front?a.$front:e.find(a.listTileCssSelector).first().addClass("flip-front");1==e.find(a.listTileCssSelector).length&&1==a.appendBack&&e.append("<div></div>");var i=null!=a.$back?a.$back:e.find(a.listTileCssSelector).last().addClass("flip-back").css({marginTop:"0px"});d&&s.useHwAccel?(e.addClass("ha"),t.addClass("ha").data("metrojs.tile",{animating:!1}),i.addClass("ha").data("metrojs.tile",{animating:!1}),1==a.flipListOnHover&&(t.bind("mouseout.liveTile",null,function(){r.flipListItem(!1,e,i,t)}),i.bind("mouseout.liveTile",null,function(){r.flipListItem(!0,e,t,i)}))):1==a.flipListOnHover&&(t.bind("mouseout.liveTile",function(){r.flipListItem(!0,e,t,i)}),i.bind("mouseout.liveTile",function(){r.flipListItem(!1,e,i,t)}))});else if("slide"==s.mode)1==s.stack&&("vertical"==s.direction?u.css({top:-p+"px"}):u.css({left:-m+"px"})),o&&s.useHwAccel&&(r.addClass("ha"),c.addClass("ha").data("metrojs.tile",{animating:!1}));else if("flip"==s.mode)if(d&&s.useHwAccel)r.addClass("ha"),c.addClass("ha").data("metrojs.tile",{animating:!1}),u.addClass("ha").data("metrojs.tile",{animating:!1});else{var k="vertical"==s.direction?{height:"0px",width:m+"px",marginTop:h+"px",opacity:"0"}:{height:"100%",width:"0px !important",marginLeft:h+"px",opacity:"0"},Q="vertical"==s.direction?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"};c.css(Q),u.css(k),s.repeatCount>-1&&jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<10&&(s.repeatCount+=1)}r.slide=function(t){if(("undefined"==typeof t||null==t)&&(t=null),s.repeatCount>-1&&s.loopCount>s.repeatCount)return s.stopTimer(!1),s.loopCount=0,s.hasRun=!1,void r.data("LiveTile",s);if(T){var n=s.isReversed,l="undefined"!=typeof c.data("metrojs.tile")?c.data("metrojs.tile"):{},d=jQuery.trim(s.stops[s.slideIndex]),f=d.indexOf("px"),h=0,y=0,v="vertical"==s.direction?p:m,j="vertical"==s.direction?"top":"left";if(f>0?(y=parseInt(d.substring(0,f)),h=y-v+"px"):(y=parseInt(d.replace("%","")),h=y-100+"%"),o&&s.useHwAccel){if("undefined"!=typeof l.animated&&1==l.animated)return;l.animated=!0;var b=e.appendStyleProperties({},["TransitionProperty","TransitionDuration"],[j,s.speed+"ms"]);"vertical"==s.direction?b.top=n&&1==s.stops.length?"0px":d:b.left=n&&1==s.stops.length?"0px":d,c.css(b),1==s.stack&&("vertical"==s.direction?b.top=n&&1==s.stops.length?-v+"px":h:b.left=n&&1==s.stops.length?-v+"px":h,u.css(b)),window.setTimeout(function(){var r=g;if(i&&a.frontIsRandom){if(0==C.length){for(var o=0;o<a.frontImages.length;o++)(o!=I||1==a.frontImages.length)&&(C[o]=o);C=e.shuffleArray(C)}r=C.pop(),w=r}e.handleSlide(n,c,i,a,r),l.animated=!1,c.data("metrojs.tile",l),!n&&i&&(g+=1,g>=a.frontImages.length&&(g=0)),a.animationComplete(s,c,u),null!=t&&t()},s.speed)}else{if(c.is(":animated"))return;var k="vertical"==s.direction?{top:n&&1==s.stops.length?"0px":d}:{left:n&&1==s.stops.length?"0px":d},Q="vertical"==s.direction?{top:n&&1==s.stops.length?-v+"px":h}:{left:n&&1==s.stops.length?-v+"px":h};c.animate(k,s.speed,function(){var r=g;if(i&&a.frontIsRandom){if(0==C.length){for(var o=0;o<a.frontImages.length;o++)(o!=I||1==a.frontImages.length)&&(C[o]=o);C=e.shuffleArray(C)}r=C.pop(),w=r}e.handleSlide(n,c,i,a,r),!n&&i&&(g+=1,g>=a.frontImages.length&&(g=0)),a.animationComplete(s,c,u),null!=t&&t()}),1==s.stack&&u.animate(Q,s.speed,function(){})}s.slideIndex+=1,s.slideIndex>=s.stops.length&&(s.slideIndex=0,s.isReversed=!s.isReversed,s.loopCount+=1)}},r.flip=function(t){if(("undefined"==typeof t||null==t)&&(t=null),s.repeatCount>-1){if(s.loopCount>s.repeatCount)return s.stopTimer(!1),s.loopCount=0,jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<10&&(s.loopCount+=1),s.hasRun=!1,void r.data("LiveTile",s);s.loopCount+=1}if(d&&s.useHwAccel){var o=2*s.speed,l=o+"ms",f="vertical"==s.direction?"flipfront180":"flipfrontY180",p="vertical"==s.direction?"flipback180":"flipbackY180",m=c.data("metrojs.tile");if("undefined"!=typeof m.animated&&1==m.animated)return;if(m.animated=!0,T)if(s.isReversed){var g=["AnimationPlayState","AnimationName","AnimationDuration"],j=["running",p,l],k=e.appendStyleProperties({},g,j);c.css(k).data("metrojs.tile",m),k=e.appendStyleProperties(k,["AnimationName"],[f]),u.css(k).data("metrojs.tile",m),window.setTimeout(function(){if(n){var i=a.backIsRandom,r=y;if(i){if(0==b.length){for(var o=0;o<a.backImages.length;o++)(o!=I||1==a.backImages.length)&&(b[o]=o);b=e.shuffleArray(b)}r=b.pop(),I=r}e.handleSwap(u,!1,a,r),y+=1,y>=a.backImages.length&&(y=0)}a.animationComplete(s,c,u),null!=t&&t(),m.animated=!1,c.data("metrojs.tile",m),u.data("metrojs.tile",m)},o)}else{var Q=["AnimationPlayState","AnimationName","AnimationDuration"],S=["running",f,l],A=e.appendStyleProperties({},Q,S);c.css(A).data("metrojs.tile",m),A=e.appendStyleProperties(A,["AnimationName"],[p]),u.css(A).data("metrojs.tile",m),window.setTimeout(function(){if(i){var n=a.frontIsRandom,r=v;if(n){if(0==C.length){for(var o=0;o<a.frontImages.length;o++)(o!=I||1==a.frontImages.length)&&(C[o]=o);C=e.shuffleArray(C)}r=C.pop(),w=r}e.handleSwap(c,!0,a,r),v+=1,v>=a.frontImages.length&&(v=0)}a.animationComplete(s,u,c),null!=t&&t(),m.animated=!1,c.data("metrojs.tile",m),u.data("metrojs.tile",m)},o)}s.isReversed=!s.isReversed}else if(s.isReversed){var x="vertical"==s.direction?{height:"0px",width:"100%",marginTop:h+"px",opacity:"0"}:{height:"100%",width:"0px",marginLeft:h+"px",opacity:"0"},L="vertical"==s.direction?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"};c.stop().animate(x,{duration:s.speed}),window.setTimeout(function(){if(u.stop().animate(L,{duration:s.speed}),i){var n=a.frontIsRandom,r=v;if(n){if(0==C.length){for(var o=0;o<a.frontImages.length;o++)(o!=w||1==a.frontImages.length)&&(C[o]=o);C=e.shuffleArray(C)}r=C.pop(),w=r}e.handleSwap(c,!0,a,r),v+=1,v>=a.frontImages.length&&(v=0)}s.isReversed=!s.isReversed,a.animationComplete(s,u,c),null!=t&&t()},s.speed)}else{var M="vertical"==s.direction?{height:"0px",width:"100%",marginTop:h+"px",opacity:"0"}:{height:"100%",width:"0px",marginLeft:h+"px",opacity:"0"},P="vertical"==s.direction?{height:"100%",width:"100%",marginTop:"0px",opacity:"1"}:{height:"100%",width:"100%",marginLeft:"0px",opacity:"1"};u.stop().animate(M,{duration:s.speed}),window.setTimeout(function(){if(c.stop().animate(P,{duration:s.speed}),n){var i=a.backIsRandom,r=y;if(i){if(0==b.length){for(var o=0;o<a.backImages.length;o++)(o!=I||1==a.backImages.length)&&(b[o]=o);b=e.shuffleArray(b)}r=b.pop(),I=r}e.handleSwap(u,!1,a,r),y+=1,y>=a.backImages.length&&(y=0)}s.isReversed=!s.isReversed,a.animationComplete(s,c,u),null!=t&&t()},s.speed)}},r.flipList=function(t){if(("undefined"==typeof t||null==t)&&(t=null),s.repeatCount>-1){if(s.loopCount>s.repeatCount)return s.stopTimer(!1),s.loopCount=0,s.hasRun=!1,void r.data("LiveTile",s);s.loopCount+=1}var o=[],l=[],d=r.find(a.tileCssSelector),c=0;if(i){if(0==C.length){for(var f=0;f<a.frontImages.length;f++)(f!=w||1==a.frontImages.length)&&(C[f]=f);C=e.shuffleArray(C)}c=C.pop(),w=c}var u=0;if(n){if(0==b.length){for(var f=0;f<a.backImages.length;f++)(f!=I||1==a.backImages.length)&&(b[f]=f);b=e.shuffleArray(b)}u=b.pop(),I=u}d.each(function(t){var d=jQuery(this);if(j.length<t+1){var f={};f.$front=d.find(a.listTileCssSelector).first(),f.$back=d.find(a.listTileCssSelector).last(),f.isReversed=!1,j[t]=f}var p,m=j[t].$front,h=j[t].$back,g=a.triggerDelay(t),y=g>0?s.speed+g:s.speed,v=a.alwaysTrigger?!0:351*Math.random()>150?!0:!1;j[t].isReversed?v&&g>=0&&window.setTimeout(function(){if(j[t].isReversed=!1,i){var n=a.frontIsRandom,s=a.frontIsInGrid,l=a.frontIsBackgroundImage,f=a.frontImages;if(n&&!s){if(0==o.length){for(var u=0;u<a.frontImages.length;u++)o[u]=u;o=e.shuffleArray(o)}p=f[o.pop()]}else p=s?f[Math.min(c,f.length)]:f[Math.min(t,f.length)];r.flipListItem(!0,d,m,h,p,l)}else r.flipListItem(!0,d,m,h)},y):v&&g>=0&&window.setTimeout(function(){if(j[t].isReversed=!0,n){var i=a.backIsRandom,o=a.backIsInGrid,s=a.backIsBackgroundImage,c=a.backImages;if(i&&!o){if(0==l.length){for(var f=0;f<a.backImages.length;f++)l[f]=f;l=e.shuffleArray(l)}p=c[l.pop()]}else p=o?c[Math.min(u,c.length)]:c[Math.min(t,c.length)];r.flipListItem(!1,d,h,m,p,s)}else r.flipListItem(!1,d,h,m)},y)}),window.setTimeout(function(){s.isReversed=!s.isReversed},s.speed)},r.flipListItem=function(t,i,n,r,o,l){var c=a.ignoreDataAttributes||"undefined"==typeof i.data("direction")?s.direction:i.data("direction");if(d&&s.useHwAccel){l=t?a.frontIsBackgroundImage:a.backIsBackgroundImage;var f=t?n.data("metrojs.tile").animating:r.data("metrojs.tile").animating;if(1==f)return;var u=2*s.speed,p=u+"ms",m="vertical"==c?"flipfront180":"flipfrontY180",h="vertical"==c?"flipback180":"flipbackY180",g=e.appendStyleProperties({},["AnimationPlayState","AnimationName","AnimationDuration"],["running",h,p]),y=e.appendStyleProperties({},["AnimationPlayState","AnimationName","AnimationDuration"],["running",m,p]);n.css(g).data("metrojs.tile").animating=!0,r.css(y).data("metrojs.tile").animating=!0,window.setTimeout(function(){"undefined"!=typeof o&&e.handleListItemSwap(n,o,l,a),n.data("metrojs.tile").animating=!1,r.data("metrojs.tile").animating=!1},0)}else{var v=i.height(),T=i.width(),j="vertical"==c?v/2:T/2,C="vertical"==c?{height:"0px",width:"100%",marginTop:j+"px",opacity:0}:{height:"100%",width:"0px",marginLeft:j+"px",opacity:0},w="vertical"==c?{height:"100%",width:"100%",marginTop:"0px",opacity:1}:{height:"100%",width:"100%",marginLeft:"0px",opacity:1};n.stop().animate(C,{duration:s.speed}),window.setTimeout(function(){r.stop().animate(w,{duration:s.speed}),"undefined"!=typeof o&&e.handleListItemSwap(n,o,l,a)},s.speed)}},s.doAction=function(){var e=null;switch(s.stopTimer(!1),s.mode){case"slide":e=r.slide;break;case"flip":e=r.flip;break;case"flip-list":e=r.flipList}var t=function(){s.setTimer()};null!=e&&(T=!0,e(t))},s.setTimer=function(){var t=null;switch(s.mode){case"slide":t=r.slide;break;case"flip":t=r.flip;break;case"flip-list":t=r.flipList}null!=t&&(0==s.hasRun?(window.clearTimeout(r.actionTimer),r.actionTimer=window.setTimeout(function(){T=!0,t(),s.setTimer()},s.initDelay)):(null!=r.slideTimer&&(r.slideTimer=e.stopTimer(r.slideTimer)),r.slideTimer=e.setTimer(function(){T=!0,t()},s.speed+s.delay))),s.hasRun=!0},s.stopTimer=function(t){r.slideTimer=e.stopTimer(r.slideTimer),r.actionTimer=window.clearTimeout(r.actionTimer),T=!1,"undefined"!=typeof t&&1==t&&s.setTimer()},r.data("LiveTile",s),s.setTimer()})},animate:function(){jQuery(this).each(function(){var e=jQuery(this).data("LiveTile");e.doAction()})},destroy:function(){jQuery(this).each(function(e,t){var a=jQuery(t);a.unbind(".liveTile"),a.slideTimer=null;var i=a.data("LiveTile");if(null!=i){var n=a.find(jQuery.fn.liveTile.defaults.tileCssSelector),r=n.find(jQuery.fn.liveTile.defaults.listTileCssSelector);n.unbind(".liveTile").removeClass("ha"),r.unbind(".liveTile").removeClass("ha"),delete i.setTimer,i.stopTimer(!1),delete i,n.slide=null,n.flip=null,n.flipList=null,n.liveTile=null,delete n.slide,delete n.flip,delete n.flipList,delete n.liveTile}a.data("LiveTile",null),a.removeData("LiveTile"),a.removeData("ha"),a.removeData("metrojs.tile"),a.slide=null,a.flip=null,a.flipList=null,a.liveTile=null,delete a.slide,delete a.flip,delete a.flipList,delete a.liveTile})},stop:function(e){jQuery(this).each(function(){var t=jQuery(this).data("LiveTile");t.stopTimer(e),t.loopCount=0,t.hasRun=!1})},pause:function(){jQuery(this).each(function(){jQuery(this).data("LiveTile").stopTimer()})},play:function(){jQuery(this).each(function(){jQuery(this).data("LiveTile").setTimer()})},rebind:function(e){jQuery(this).each(function(){var a=e;a.stopTimer(!1),a.loopCount=0,a.hasRun=!1,t.init.apply(this,a)})}};jQuery.fn.metrojs.theme={},jQuery.fn.metrojs.theme.loadDefaultTheme=function(e){if("undefined"==typeof e||null==e)e=jQuery.fn.metrojs.theme.defaults;else{var t=jQuery.fn.metrojs.theme.defaults;jQuery.extend(t,e),e=t}var a="undefined"!=typeof window.localStorage,i=function(e){return"undefined"!=typeof window.localStorage[e]&&null!=window.localStorage[e]};1==e.applyTheme&&(!a||i("Metro.JS.AccentColor")&&i("Metro.JS.BaseAccentColor")?a?(e.accentColor=window.localStorage["Metro.JS.AccentColor"],e.baseTheme=window.localStorage["Metro.JS.BaseAccentColor"],jQuery(e.accentCssSelector).addClass(e.accentColor).data("accent",e.accentColor),jQuery(e.baseThemeCssSelector).addClass(e.baseTheme),e.loaded(e.baseTheme,e.accentColor)):(jQuery(e.accentCssSelector).addClass(e.accentColor).data("accent",e.accentColor),jQuery(e.baseThemeCssSelector).addClass(e.baseTheme),e.loaded(e.baseTheme,e.accentColor),"undefined"!=typeof e.preloadAltBaseTheme&&e.preloadAltBaseTheme&&jQuery(["dark"==e.baseTheme?e.metroLightUrl:e.metroDarkUrl]).metrojs.preloadImages(function(){})):(window.localStorage["Metro.JS.AccentColor"]=e.accentColor,window.localStorage["Metro.JS.BaseAccentColor"]=e.baseTheme,jQuery(e.accentCssSelector).addClass(e.accentColor).data("accent",e.accentColor),jQuery(e.baseThemeCssSelector).addClass(e.baseTheme),e.loaded(e.baseTheme,e.accentColor),"undefined"!=typeof e.preloadAltBaseTheme&&e.preloadAltBaseTheme&&jQuery(["dark"==e.baseTheme?e.metroLightUrl:e.metroDarkUrl]).metrojs.preloadImages(function(){})))},jQuery.fn.metrojs.theme.applyTheme=function(e,t,a){if("undefined"==typeof a||null==a)a=jQuery.fn.metrojs.theme.defaults;else{var i=jQuery.fn.metrojs.theme.defaults;jQuery.extend(i,a),a=i}if("undefined"!=typeof e&&null!=e){"undefined"!=typeof window.localStorage&&(window.localStorage["Metro.JS.BaseAccentColor"]=e);var n=jQuery(a.baseThemeCssSelector);n.length>0&&("dark"==e?n.addClass("dark").removeClass("light"):"light"==e&&n.addClass("light").removeClass("dark"))}if("undefined"!=typeof t&&null!=t){"undefined"!=typeof window.localStorage&&(window.localStorage["Metro.JS.AccentColor"]=t);var r=jQuery(a.accentCssSelector);if(r.length>0){var o=!1;r.each(function(){jQuery(this).addClass(t);var e=jQuery(this).data("accent");if(e!=t){var a=jQuery(this).attr("class").replace(e,"");a=a.replace(/(\s)+/," "),jQuery(this).attr("class",a),jQuery(this).data("accent",t),o=!0}}),o&&"function"==typeof a.accentPicked&&a.accentPicked(t)}}},jQuery.fn.metrojs.theme.appendAccentColors=function(e){if("undefined"==typeof e||null==e)e=jQuery.fn.metrojs.theme.defaults;else{var t=jQuery.fn.metrojs.theme.defaults;jQuery.extend(t,e),e=t}for(var a="",i=e.accentColors,n=e.accentListTemplate,r=0;r<i.length;r++)a+=n.replace(/\{0\}/g,i[r]);$(a).appendTo(e.accentListContainer)},jQuery.fn.metrojs.theme.appendBaseThemes=function(e){if("undefined"==typeof e||null==e)e=jQuery.fn.metrojs.theme.defaults;else{var t=jQuery.fn.metrojs.theme.defaults;jQuery.extend(t,e),e=t}for(var a="",i=e.baseThemes,n=e.baseThemeListTemplate,r=0;r<i.length;r++)a+=n.replace(/\{0\}/g,i[r]);$(a).appendTo(e.baseThemeListContainer)},jQuery.fn.metrojs.theme.defaults={baseThemeCssSelector:"body",accentCssSelector:".tiles",accentColor:"blue",baseTheme:"dark",accentColors:["amber","brown","cobalt","crimson","cyan","magenta","lime","indigo","green","emerald","mauve","olive","orange","pink","red","sienna","steel","teal","violet","yellow"],baseThemes:["light","dark"],accentListTemplate:"<li><a href='javascript:;' title='{0}' class='accent {0}'></a></li>",accentListContainer:".theme-options",baseThemeListTemplate:"<li><a href='javascript:;' title='{0}' class='accent {0}'></a></li>",baseThemeListContainer:".base-theme-options"},jQuery.fn.applicationBar=function(e){var t="undefined"!=typeof jQuery.fn.metrojs.theme?jQuery.fn.metrojs.theme.defaults:{};if(jQuery.extend(t,jQuery.fn.applicationBar.defaults,e),"undefined"!=typeof jQuery.fn.metrojs.theme){var a=jQuery.fn.metrojs.theme;a.loadDefaultTheme(t);var i=t.accentListContainer+" a";$(i).live("click",function(){var e=jQuery(this).attr("class").replace("accent","").replace(" ","");a.applyTheme(null,e,t),"function"==typeof t.accentPicked&&t.accentPicked(e)});var n=t.baseThemeListContainer+" a";$(n).live("click",function(){var e=jQuery(this).attr("class").replace("accent","").replace(" ","");a.applyTheme(e,null,t),"function"==typeof t.themePicked&&t.themePicked(e)})}jQuery(this).each(function(){var e=jQuery(this);navigator.userAgent.match(/(Android|webOS|iPhone|iPod|BlackBerry|PIE|IEMobile)/i)&&e.css({position:"absolute",bottom:"0px"}),e.animateAppBar=function(a){var i=a?t.collapseHeight:t.expandHeight;a?e.removeClass("expanded"):e.hasClass("expanded")||e.addClass("expanded"),e.stop().animate({height:i},{duration:t.duration})},e.find("a.etc").click(function(){e.animateAppBar(e.hasClass("expanded"))}),1==t.bindKeyboard&&jQuery(document.documentElement).keyup(function(t){38==t.keyCode?e.hasClass("expanded")||e.animateAppBar(!1):40==t.keyCode&&e.hasClass("expanded")&&e.animateAppBar(!0)})})},jQuery.fn.applicationBar.defaults={applyTheme:!0,themePicked:function(e){},accentPicked:function(e){},loaded:function(e,t){},duration:500,expandHeight:"320px",collapseHeight:"60px",bindKeyboard:!0,metroLightUrl:"images/metroIcons_light.jpg",metroDarkUrl:"images/metroIcons.jpg",preloadAltBaseTheme:!1}}();