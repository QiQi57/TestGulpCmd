!function(t){function a(t,a){for(var e=window,r=(t||"").split(".");e&&r.length;)e=e[r.shift()];return"function"==typeof e?e:(a.push(t),Function.constructor.apply(null,a))}function e(t){return"GET"===t||"POST"===t}function r(t,a){!e(a)&&t.setRequestHeader("X-HTTP-Method-Override",a)}function i(a,e,r){var i;-1===r.indexOf("application/x-javascript")&&(i=(a.getAttribute("data-ajax-mode")||"").toUpperCase(),t(a.getAttribute("data-ajax-update")).each(function(a,r){var n;switch(i){case"BEFORE":n=r.firstChild,t("<div />").html(e).contents().each(function(){r.insertBefore(this,n)});break;case"AFTER":t("<div />").html(e).contents().each(function(){r.appendChild(this)});break;default:t(r).html(e)}}))}function n(n,u){var o,s,d,c;o=n.getAttribute("data-ajax-confirm"),(!o||window.confirm(o))&&(s=t(n.getAttribute("data-ajax-loading")),c=n.getAttribute("data-ajax-loading-duration")||0,t.extend(u,{type:n.getAttribute("data-ajax-method")||void 0,url:n.getAttribute("data-ajax-url")||void 0,beforeSend:function(t){var e;return r(t,d),e=a(n.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments),e!==!1&&s.show(c),e},complete:function(){s.hide(c),a(n.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(t,e,r){i(n,t,r.getResponseHeader("Content-Type")||"text/html"),a(n.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:a(n.getAttribute("data-ajax-failure"),["xhr","status","error"])}),u.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),d=u.type.toUpperCase(),e(d)||(u.type="POST",u.data.push({name:"X-HTTP-Method-Override",value:d})),t.ajax(u))}function u(a){var e=t(a).data(s);return!e||!e.validate||e.validate()}var o="unobtrusiveAjaxClick",s="unobtrusiveValidation";t("a[data-ajax=true]").live("click",function(t){t.preventDefault(),n(this,{url:this.href,type:"GET",data:[]})}),t("form[data-ajax=true] input[type=image]").live("click",function(a){var e=a.target.name,r=t(a.target),i=r.parents("form")[0],n=r.offset();t(i).data(o,[{name:e+".x",value:Math.round(a.pageX-n.left)},{name:e+".y",value:Math.round(a.pageY-n.top)}]),setTimeout(function(){t(i).removeData(o)},0)}),t("form[data-ajax=true] :submit").live("click",function(a){var e=a.target.name,r=t(a.target).parents("form")[0];t(r).data(o,e?[{name:e,value:a.target.value}]:[]),setTimeout(function(){t(r).removeData(o)},0)}),t("form[data-ajax=true]").live("submit",function(a){var e=t(this).data(o)||[];a.preventDefault(),u(this)&&n(this,{url:this.action,type:this.method||"GET",data:e.concat(t(this).serializeArray())})})}(jQuery);